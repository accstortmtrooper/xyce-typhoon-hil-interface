.SUBCKT ntp20n03l27 1 2 3
**************************************
*      Model Generated by MODPEX     *
*Copyright(c) Symmetry Design Systems*
*         All Rights Reserved        *
*    UNPUBLISHED LICENSED SOFTWARE   *
*   Contains Proprietary Information *
*      Which is The Property of      *
*     SYMMETRY OR ITS LICENSORS      *
*Commercial Use or Resale Restricted *
*   by Symmetry License Agreement    *
**************************************
* Model generated on Dec 20, 01
* MODEL FORMAT: PSpice
* Symmetry POWER MOS Model (Version 1.0)
* External Node Designations
* Node 1 -> Drain
* Node 2 -> Gate
* Node 3 -> Source
M1 9 7 8 8 MM L=100u W=100u
* Default values used in MM:
* The voltage-dependent capacitances are
* not included. Other default values are:
*   RS=0 RD=0 LD=0 CBD=0 CBS=0 CGBO=0
.MODEL MM NMOS LEVEL=1 IS=1e-32
+VTO=2.02815 LAMBDA=0 KP=26.0877
+CGSO=9.70673e-06 CGDO=6.53623e-07
RS 8 3 0.016011
D1 3 1 MD
.MODEL MD D IS=1.57218e-08 RS=0.00791851 N=1.5 BV=30
+IBV=0.00025 EG=1.2 XTI=4 TT=0
+CJO=7.73407e-10 VJ=0.501078 M=0.350599 FC=0.499806
RDS 3 1 3e+07
RD 9 1 0.0001
RG 2 7 2.2257
D2 4 5 MD1
* Default values used in MD1:
*   RS=0 EG=1.11 XTI=3.0 TT=0
*   BV=infinite IBV=1mA
.MODEL MD1 D IS=1e-32 N=50
+CJO=7.06313e-10 VJ=0.501815 M=0.895321 FC=1.00001e-08
D3 0 5 MD2
* Default values used in MD2:
*   EG=1.11 XTI=3.0 TT=0 CJO=0
*   BV=infinite IBV=1mA
.MODEL MD2 D IS=1e-10 N=0.400775 RS=3.00755e-06
RL 5 10 1
FI2 7 9 VFI2 -1
VFI2 4 0 0
EV16 10 0 9 7 1
CAP 11 10 5.43136e-09
FI1 7 9 VFI1 -1
VFI1 11 6 0
RCAP 6 10 1
D4 0 6 MD3
* Default values used in MD3:
*   EG=1.11 XTI=3.0 TT=0 CJO=0
*   RS=0 BV=infinite IBV=1mA
.MODEL MD3 D IS=1e-10 N=0.400775
.ENDS ntp20n03l27

* IXTA36N30P NMOS model
* updated using Model Editor release 9.2.1 on 04/01/04 at 15:28
* The Model Editor is a PSpice product hem.
.MODEL IXTA36N30P NMOS
+ LEVEL=3
+ L=2.0000E-6
+ W=29
+ KP=1.0535E-6
+ RS=10.000E-3
+ RD=83.189E-3
+ VTO=4.9255
+ RDS=30.000E6
+ TOX=2.0000E-6
+ CGSO=55.392E-12
+ CGDO=8.0802E-12
+ CBD=4.9672E-9
+ MJ=1.5000
+ PB=3
+ RG=1.8188
+ IS=1.2921E-6
+ N=2.1780
+ RB=1.0000E-9
+ GAMMA=0
+ KAPPA=0
*$

*SRC=IXTV03N400S;IXTV03N400S;MOSFETs N;Enh;*4.00kV 0.300A 290ohms IXYS Power MOSFET
*SYM=POWMOSN
.SUBCKT IXTV03N400S   10 20 30
*     TERMINALS:  D  G  S
M1   1  2  3  3  DMOS L=1U W=1U
RD  10  1  138
RS  40  3  7.25
RG  20  2  500
CGS  2  3  429p
EGD 12  0  2  1  1
VFB 14  0  0
FFB  2  1  VFB  1
CGD 13 14  77.0p
R1  13  0  1.00
D1  12 13  DLIM
DDG 15 14  DCGD
R2  12 15  1.00
D2  15  0  DLIM
DSD  3 10  DSUB
LS  30 40  7.50n
.MODEL DMOS  NMOS(LEVEL=1 LAMBDA=2.00m VTO=4.00 KP=0.227)
.MODEL DCGD D (CJO=77.0p VJ=0.600 M=0.680)
.MODEL DSUB D (IS=1.25n N=1.50 RS=7.50 BV=4.00k
+ CJO=55.9p VJ=0.800 M=0.420 TT=2.80u)
.MODEL DLIM D (IS=100U)
.ENDS


*****************************************************************
* INFINEON Power Transistors                                    *
* Level1/3 PSPICE Library for OptiMOS3                          *
* n-Channel Transistors                                         *
*                                                               *
* This file also contains simplified models that are compatible *
* to standard Spice.                                            *
*                                                               *
* Version 241017                                                *
*                                                               *
*****************************************************************
*                                                               *
* The Simulation Model is subject to change without notice. In  *
* addition, models can be a useful tool in evaluating device    *
* performance, they cannot reflect the accurate device          *
* performance under all conditions, nor are they intended to    *
* replace bread boarding for final verification. Infineon       *
* therefore does not assume any warranty or liability           *
* whatsoever arising from their use. Infineon does not assume   *
* any warranty or liability for the values and functions of the *
* Simulation Model.                                             *
* The methods and results of the Simulation Model are to the    *
* best of our knowledge                                         *
* correct. However, the user is fully responsible to verify and *
* validate these results under the operating conditions and in  *
* the environment of its application. Infineon will not bear    *
* the responsibility arising out of or in connection with any   *
* malfunction of the Simulation Models.                         *
* Models provided by Infineon are not warranted by Infineon as  *
* completely and comprehensively representing all the           *
* specifications and operating characteristics of the           *
* semiconductor products to which these models relate. The      *
* models describe the characteristics of typical devices. In    *
* all cases, the current data sheet information for a given     *
* device is the conclusive design guideline and the only actual *
* performance specification.                                    *
*                                                               *
* This library contains models of the following INFINEON        *
* OptiMOS3 transistors:                                         *
*                                                               *
*    150V NL                                                    *
*  IPB065N15N3          IPB072N15N3           IPI075N15N3       *
*  IPP075N15N3          IPA105N15N3           IPB108N15N3       *
*  IPI111N15N3          IPP111N15N3           IPB200N15N3       *
*  IPI200N15N3          IPD200N15N3           IPP200N15N3       *
*  IPB530N15N3          IPD530N15N3           IPI530N15N3       *
*  IPP530N15N3          BSC190N15NS3          BSC360N15NS3      *
*  BSC520N15NS3         BSZ520N15NS3          BSZ900N15NS3      *
*  BSB165N15NZ3         BSB280N15NZ3          IPA075N15N3       *
*  IPT059N15N3                                                  *
*                                                               *
*****************************************************************
* thermal nodes of level 3 models:                              *
*                                                               *
*  .SUBCKT IPB065N15N3 drain gate source Tj Tcase               *
*  Tj :    potential=temperature (in °C) at junction (typically *
*          not connected)                                       *
*  Tcase : node where the boundary contition - external heat    *
*          sinks etc - have to be connected (ideal heat sink    *
*          can be modeled by using a voltage source stating the *
*          ambient temperature in °C between Tcase and ground.  *
*                                                               *
*****************************************************************

.SUBCKT S3_150_nsp_var dd g s0 sp Tj PARAMS: a=1 Rsp=1 dVth=0 dR=0 dgfs=0 Inn=1 Unn=1 Rmax=1
+gmmin=1 Rs=1 Rp=1 dC=0 Rm=1u heat=0

.PARAM  Fm=0.1       Fn=0.5      kbq=85.8u    fbet=0
.PARAM  c=1.343      muc=38m     Vth0=4.2     auth=3.152m  al=0.5
.PARAM  UT=100m      ab=115.6m   ab2=-105u    lB=-23       UB=175
.PARAM  dvx=200m     dvgs=355m   auth_sub=3.152m


.PARAM  b0=12.035    p0=9.1035   p1=-33.65m   p2=55u

.PARAM  Rd=110m      nmu=2.82    Tref=298     T0=273       lnIsj=-25.769
.PARAM  ndi=1.185    Rdi=10.47m  nmu2=-16.5m  ta=50n       td=200n
.PARAM  Rf=0.31      mubet=1.5   rpa=3m

.PARAM  f3=199p      f3a=1p      rc1=0p
.PARAM  f4=10.8p     f5=4p       sl=0.3p
.PARAM  ps1=18p      ps2=-2      ps3=10p      ps4=-0.1      ps5=0.26p     ps6=2.5p  ps7=0    pc0=0
.PARAM  qs1=20p      qs2=45p     qs3=-2       qs4=195p      qs5=-0.0555   qs6=0     qs7=0    qs8=0    f2r=0
.PARAM  q80=288p     q81=40p     q82=8p       q83=0p        q84=0

.PARAM  x1={(q80-q81)/q82}       x2={q80/q82}
.PARAM  y1={(f4-f5)/sl}          y2={f4/sl}

.PARAM  Vmin=2.7   Vmax=4.7  dCmax=0.33
.PARAM  Vth={Vth0+(Vmax-Vth0)*limit(dVth,0,1)-(Vmin-Vth0)*limit(dVth,-1,0)}
.PARAM  q0={b0*((T0/Tref)**mubet)*a}
.PARAM  q1={(Unn-Inn*Rs-Vth0)*q0}
.PARAM  q2={(Fm*SQRT(0.4)-c)*Inn*q0}
.PARAM  Rlim={(q1+2*q2*Rmax-SQRT(q1**2+4*q2))/(2*q2)}
.PARAM  dRd={Rd/a+if(dVth==0,limit(dR,0,1)*max(Rlim-Rd/a-Rs-Rp,0),0)}
.PARAM  bm={c/((1/gmmin-Rs)**2*Inn*a*(T0/Tref)**mubet)}
.PARAM  bet={b0+(b0-bm)*if(dR==0,if(dVth==0,limit(dgfs,-1,0),0),0)}
.PARAM  dC1={1+dCmax*limit(dC,0,1)}

.PARAM  Cgs0={(f3*a+rc1)*dC1}
.PARAM  Cgs1={f3a*a*dC1}

.PARAM  Cdg1={(a*ps1*(1+pc0*sqrt(a)))*dC1}
.PARAM  Cdg2={ps3*a*dC1}
.PARAM  Cdg3={(ps5*a+ps6)*dC1}
.PARAM  Cdg4={f4*a*dC1}

** .PARAM  Cds1={qs6*a*dC1}
** .PARAM  Cds2={qs7*a*dC1}
** .PARAM  Cds3={q83*a*dC1}
.PARAM  Cds4={qs1*a*dC1}
.PARAM  Cds5={(a*qs2*(1+f2r/sqrt(a)))*dC1}
.PARAM  Cds6={qs4*a*dC1}
.PARAM  Cds7={q80*a*dC1}

.PARAM  dRdi={Rdi/a}

.FUNC Ue(g,y,w)  {(g-Vth+auth*(w-Tref)+Fm*y**Fn)}
.FUNC Ue1(g,y,w) {Ue(g,y,w)+(1+limit(Ue(g,y,w)+dvx,0,1)**2*(2*limit(Ue(g,y,w)+dvx,0,1)-3))*(dvgs+(auth_sub-auth)*(w-Tref))}

.FUNC I0(Uee,p,pp,z1) {if(Uee>pp,(Uee-c*z1)*z1,p*(pp-p)/c*exp((Uee-pp)/p))}
*.FUNC Ih(Uds,T,p,Uee) {bet*((1-fbet)*(T0/T)**mubet+fbet)*I0(Uee,p,min(2*p,p+c*Uds),min(Uds,Uee/(2*c)))}
*.FUNC Jh(d,g,w,y,s,x) {a*((Ih(s*y+min(d,0),w,(p0+(p1+p2*w)*w)*kbq*w,Ue1(g,y,w))+exp(min(lB+(d-UB-ab*(w-Tref))/UT,25))))}
.FUNC Idiode(Usd,Tj,Iss) {exp(min(log(Iss)+Usd/(ndi*kbq*Tj),7))-Iss}
.FUNC Idiod(Usd,Tj)      {a*Idiode(Usd,Tj,exp(min(lnIsj+(Tj/Tref-1)*1.12/(ndi*kbq*Tj),7))*(Tj/Tref)**3)}
.FUNC Pr(Vss0,Vssp)  {Vss0*Vss0/Rm+Vssp*Vssp/Rsp}

.FUNC Q1(Uds) {a*(limit(Uds,x1,x2)*(q80-q82/2*limit(Uds,x1,x2))+min(Uds-x1,0)*q81-max(x1,0)*(q80-q81)/2)}
.FUNC Q2(Udg) {a*(limit(Udg,y1,y2)*(f4-sl/2*limit(Udg,y1,y2))+min(Udg-y1,0)*f5-max(y1,0)*(f4-f5)/2)}

C_Cgs  g      s   {Cgs0}
*C_Cgs1 g      sp  {Cgs1}

*E_Eds3 d      edep3  VALUE {if(q84==0,0,V(d,s)-(exp(q84*max(V(d,s),-1))-1)/min(q84,-1u)-min(V(d,s)+1,0)*exp(-q84))}
*E_Eds3 d      edep3  VALUE {V(d,s)-I(V_sense3)/Cds3}
*C_Cds3 edep3  s      {Cds3}

E_Eds4 d      edep4  VALUE {V(d,s)-I(V_sense3)/Cds4}
C_Cds4 edep4  s      {Cds4}
E_Eds5 d      edep5  VALUE {if(qs3==0,0,V(d,sp)-(exp(qs3*max(V(d,sp),0))-1)/min(qs3,-1u)-min(V(d,sp),0))}
C_Cds5 edep5  sp     {Cds5}

E_Eds6 d      edep6  VALUE {if(qs5==0,0,V(d,sp)-(exp(qs5*max(V(d,sp),0))-1)/min(qs5,-1u)-min(V(d,sp),0))}
C_Cds6 edep6  sp     {Cds6}

E_Eds7 d      edep7  VALUE {V(d,sp)-Q1(V(d,sp))/Cds7}
C_Cds7 edep7  sp     {Cds7}

E_Edg1 d    ox1 VALUE {if(ps2==0,0,V(d,g)-(exp(ps2*max(V(d,g),0))-1)/min(ps2,-1u)-min(V(d,g),0))}
C_Cdg1 ox1  g   {Cdg1}
E_Edg2 d    ox2 VALUE {if(ps4==0,0,V(d,g)-((exp(ps4*(max(V(d,g)+ps7,0)))-exp(ps4*max(ps7,0)))/min(ps4,-1u)+min(V(d,g)+max(ps7,0),max(0,-ps7))))}
C_Cdg2 ox2  g   {Cdg2}
E_Edg3 d    ox3 VALUE {0}
C_Cdg3 ox3  g   {Cdg3}
E_Edg4 d    ox4 VALUE {V(d,g)-Q2(V(d,g))/Cdg4}
C_Cdg4 ox4  g   {Cdg4}

Rfp     s    sp  {Rsp}

G_chan   d5a   s  VALUE={Jh(V(d5a,s),V(g,s),T0+limit(V(Tj),-200,300),(SQRT(1+4*al*max(V(d5a,s),0))-1)/2/al,sgn(V(d5a,s)),0)}
Rd06     d5a  d5  1u
V_sm     d    d5  0
G_RMos   d1    d  VALUE={V(d1,d)/(Rf*dRd+(1-Rf)*dRd*((limit(V(Tj),-200,999)+T0)/Tref)**nmu)/(1+rpa*(I(V_sense)/a)**2)}
V_sense  dd   d1  0
G_diode   s   d3  VALUE={Idiod(V(s,d3),T0+limit(V(Tj),-200,499))}
G_Rdio   d2   d1  VALUE={V(d2,d1)/(dRdi*((limit(V(Tj),-200,999)+T0)/Tref)**nmu2)}
V_sense2 d2   d3  0

L_L001 a c {td/(ta+td)}
R_R001 a b {1/ta}
V_sense3 c 0 0
E_E001 b 0 VALUE {I(V_sense2)}
E_E002 e 0 VALUE {Cds4*V(d,s)}
R_R002 e c 1
R_R003 a 0 500Meg

R1        g    s  1G
Rd01      d    s  500Meg
Rd02     d2    s  500Meg
Rd03     d1    d  1k

Rmet      s    s0 {Rm}

G_TH      0   Tj  VALUE =
+{(I(V_sense)-I(V_sense2))*V(d1,d)+I(V_sm)*V(d,s)+I(V_sense2)*V(d1,s)+Pr(V(s,s0),V(s,sp))}

.ENDS

*********

.SUBCKT IPB065N15N3 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=1.8n Ld=1n Lg=4n

.PARAM Rs=393u      Rg=2.3       Rd=20u       Rm=126u
.PARAM Inn=100      Unn=10       Rmax=6.5m    gmmin=78
.PARAM RRf=382m     Rrbond=5m    Rtb=3.6      g2=647m
.PARAM act=27.28    Rsp=0.65

.FUNC   Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S3_150_nsp_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmmin={gmmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               9.75m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {1.44m+limit(Zthtype,0,1)*534.18u}
Rth2  t1      t2              {13.22m+limit(Zthtype,0,1)*4.9m}
Rth3  t2      t3              {57.09m+limit(Zthtype,0,1)*24.83m}
Rth4  t3      t4              {67.52m+limit(Zthtype,0,1)*44.28m}
Rth5  t4      Tcase           {172.84m+limit(Zthtype,0,1)*113.35m}
Cth1  Tj      0               569.697u
Cth2  t1      0               666.158u
Cth3  t2      0               6.372m
Cth4  t3      0               4.637m
Cth5  t4      0               137.136m
Cth6  Tcase   0               190m

.ENDS

**********

.SUBCKT IPB072N15N3 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=1.8n Ld=1n Lg=4n

.PARAM Rs=878u      Rg=2.3       Rd=50u       Rm=340u
.PARAM Inn=100      Unn=10       Rmax=7.2m    gmmin=72
.PARAM RRf=389m     Rrbond=16m   Rtb=6.2      g2=758m
.PARAM act=27.28    Rsp=0.65

.FUNC   Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S3_150_nsp_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmmin={gmmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               9.36m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {1.44m+limit(Zthtype,0,1)*534.18u}
Rth2  t1      t2              {13.22m+limit(Zthtype,0,1)*4.9m}
Rth3  t2      t3              {57.09m+limit(Zthtype,0,1)*24.83m}
Rth4  t3      t4              {67.52m+limit(Zthtype,0,1)*44.28m}
Rth5  t4      Tcase           {172.84m+limit(Zthtype,0,1)*113.35m}
Cth1  Tj      0               569.697u
Cth2  t1      0               666.158u
Cth3  t2      0               6.372m
Cth4  t3      0               4.637m
Cth5  t4      0               137.136m
Cth6  Tcase   0               190m

.ENDS

**********

.SUBCKT IPA075N15N3 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=1.8n Ld=2.5n Lg=4n

.PARAM Rs=878u      Rg=2.3       Rd=350u      Rm=340u
.PARAM Inn=43       Unn=10       Rmax=7.5m    gmmin=48.26
.PARAM RRf=389m     Rrbond=16m   Rtb=6.2      g2=758m
.PARAM act=27.28    Rsp=0.65

.FUNC   Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S3_150_nsp_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmmin={gmmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               9.36m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {1.44m+limit(Zthtype,0,1)*534.18u}
Rth2  t1      t2              {13.22m+limit(Zthtype,0,1)*4.9m}
Rth3  t2      t3              {57.09m+limit(Zthtype,0,1)*24.83m}
Rth4  t3      t4              {619.62m+limit(Zthtype,0,1)*503.8m}
Rth5  t4      Tcase           {1.42+limit(Zthtype,0,1)*1.15}
Cth1  Tj      0               379.798u
Cth2  t1      0               862.111u
Cth3  t2      0               6.372m
Cth4  t3      0               30.936m
Cth5  t4      0               789.515m
Cth6  Tcase   0               100m

.ENDS

**********

.SUBCKT IPI075N15N3 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=1.8n Ld=2.5n Lg=4n

.PARAM Rs=878u      Rg=2.3       Rd=350u      Rm=340u
.PARAM Inn=100      Unn=10       Rmax=7.5m    gmmin=72
.PARAM RRf=389m     Rrbond=16m   Rtb=6.2      g2=758m
.PARAM act=27.28    Rsp=0.65

.FUNC   Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S3_150_nsp_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmmin={gmmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               9.36m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {1.44m+limit(Zthtype,0,1)*534.18u}
Rth2  t1      t2              {13.22m+limit(Zthtype,0,1)*4.9m}
Rth3  t2      t3              {57.09m+limit(Zthtype,0,1)*24.83m}
Rth4  t3      t4              {67.52m+limit(Zthtype,0,1)*44.28m}
Rth5  t4      Tcase           {172.84m+limit(Zthtype,0,1)*113.35m}
Cth1  Tj      0               569.697u
Cth2  t1      0               666.158u
Cth3  t2      0               6.372m
Cth4  t3      0               4.637m
Cth5  t4      0               137.136m
Cth6  Tcase   0               190m

.ENDS

**********

.SUBCKT IPP075N15N3 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=1.8n Ld=2.5n Lg=4n

.PARAM Rs=878u      Rg=2.3       Rd=350u      Rm=340u
.PARAM Inn=100      Unn=10       Rmax=7.5m    gmmin=72
.PARAM RRf=389m     Rrbond=16m   Rtb=6.2      g2=758m
.PARAM act=27.28    Rsp=0.65

.FUNC   Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S3_150_nsp_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmmin={gmmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               9.36m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {1.44m+limit(Zthtype,0,1)*534.18u}
Rth2  t1      t2              {13.22m+limit(Zthtype,0,1)*4.9m}
Rth3  t2      t3              {57.09m+limit(Zthtype,0,1)*24.83m}
Rth4  t3      t4              {67.52m+limit(Zthtype,0,1)*44.28m}
Rth5  t4      Tcase           {172.84m+limit(Zthtype,0,1)*113.35m}
Cth1  Tj      0               569.697u
Cth2  t1      0               666.158u
Cth3  t2      0               6.372m
Cth4  t3      0               4.637m
Cth5  t4      0               137.136m
Cth6  Tcase   0               220m

.ENDS

**********

.SUBCKT IPT059N15N3 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=1.5n Ld=2n Lg=3n

.PARAM Rs=226u      Rg=2.3       Rd=20u       Rm=88u
.PARAM Inn=150      Unn=10       Rmax=5.9m    gmmin=96.37
.PARAM RRf=500m     Rrbond=3m    Rtb=2.6      g2=999m
.PARAM act=27.1     Rsp=0.65

.FUNC   Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S3_150_nsp_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmmin={gmmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               10.97m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {1.45m+limit(Zthtype,0,1)*538.01u}
Rth2  t1      t2              {13.31m+limit(Zthtype,0,1)*4.92m}
Rth3  t2      t3              {48.41m+limit(Zthtype,0,1)*6.72m}
Rth4  t3      t4              {52.74m+limit(Zthtype,0,1)*42.58m}
Rth5  t4      Tcase           {126.88m+limit(Zthtype,0,1)*102.45m}
Cth1  Tj      0               565.938u
Cth2  t1      0               661.831u
Cth3  t2      0               6.163m
Cth4  t3      0               4.776m
Cth5  t4      0               115m
Cth6  Tcase   0               30m

.ENDS

**********

.SUBCKT IPA105N15N3 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=2n Ld=2.5n Lg=4n

.PARAM Rs=751u      Rg=2         Rd=350u      Rm=106u
.PARAM Inn=37       Unn=10       Rmax=10.5m   gmmin=36.29
.PARAM RRf=438m     Rrbond=28m   Rtb=8.2      g2=807m
.PARAM act=16.1     Rsp=0.52

.FUNC   Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S3_150_nsp_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmmin={gmmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               5.56m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {2.44m+limit(Zthtype,0,1)*905.04u}
Rth2  t1      t2              {22.2m+limit(Zthtype,0,1)*8.21m}
Rth3  t2      t3              {94.14m+limit(Zthtype,0,1)*42.16m}
Rth4  t3      t4              {747.43m+limit(Zthtype,0,1)*475.5m}
Rth5  t4      Tcase           {1.41+limit(Zthtype,0,1)*897.01m}
Cth1  Tj      0               336.222u
Cth2  t1      0               396.853u
Cth3  t2      0               3.901m
Cth4  t3      0               15.917m
Cth5  t4      0               797.929m
Cth6  Tcase   0               100m

.ENDS

**********

.SUBCKT IPB108N15N3 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=1.8n Ld=1n Lg=4n

.PARAM Rs=609u      Rg=2         Rd=50u       Rm=106u
.PARAM Inn=83       Unn=10       Rmax=10.8m   gmmin=54.99
.PARAM RRf=361m     Rrbond=12m   Rtb=5.5      g2=736m
.PARAM act=16.1     Rsp=0.52

.FUNC   Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S3_150_nsp_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmmin={gmmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               8.34m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {2.44m+limit(Zthtype,0,1)*905.04u}
Rth2  t1      t2              {22.2m+limit(Zthtype,0,1)*8.21m}
Rth3  t2      t3              {94.14m+limit(Zthtype,0,1)*42.16m}
Rth4  t3      t4              {115.13m+limit(Zthtype,0,1)*66.86m}
Rth5  t4      Tcase           {220.12m+limit(Zthtype,0,1)*127.83m}
Cth1  Tj      0               336.222u
Cth2  t1      0               396.853u
Cth3  t2      0               3.901m
Cth4  t3      0               2.737m
Cth5  t4      0               93.691m
Cth6  Tcase   0               190m

.ENDS

**********

.SUBCKT IPI111N15N3 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=1.8n Ld=2.5n Lg=4n

.PARAM Rs=609u      Rg=2         Rd=350u      Rm=106u
.PARAM Inn=83       Unn=10       Rmax=11.1m   gmmin=54.99
.PARAM RRf=361m     Rrbond=12m   Rtb=5.5      g2=736m
.PARAM act=16.1     Rsp=0.52

.FUNC   Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S3_150_nsp_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmmin={gmmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               8.34m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {2.44m+limit(Zthtype,0,1)*905.04u}
Rth2  t1      t2              {22.2m+limit(Zthtype,0,1)*8.21m}
Rth3  t2      t3              {94.14m+limit(Zthtype,0,1)*42.16m}
Rth4  t3      t4              {115.13m+limit(Zthtype,0,1)*66.86m}
Rth5  t4      Tcase           {220.12m+limit(Zthtype,0,1)*127.83m}
Cth1  Tj      0               336.222u
Cth2  t1      0               396.853u
Cth3  t2      0               3.901m
Cth4  t3      0               2.737m
Cth5  t4      0               93.691m
Cth6  Tcase   0               190m

.ENDS

**********

.SUBCKT IPP111N15N3 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=1.8n Ld=2.5n Lg=4n

.PARAM Rs=609u      Rg=2         Rd=350u      Rm=106u
.PARAM Inn=83       Unn=10       Rmax=11.1m   gmmin=54.99
.PARAM RRf=361m     Rrbond=12m   Rtb=5.5      g2=736m
.PARAM act=16.1     Rsp=0.52

.FUNC   Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S3_150_nsp_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmmin={gmmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               8.34m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {2.44m+limit(Zthtype,0,1)*905.04u}
Rth2  t1      t2              {22.2m+limit(Zthtype,0,1)*8.21m}
Rth3  t2      t3              {94.14m+limit(Zthtype,0,1)*42.16m}
Rth4  t3      t4              {115.13m+limit(Zthtype,0,1)*66.86m}
Rth5  t4      Tcase           {220.12m+limit(Zthtype,0,1)*127.83m}
Cth1  Tj      0               336.222u
Cth2  t1      0               396.853u
Cth3  t2      0               3.901m
Cth4  t3      0               2.737m
Cth5  t4      0               93.691m
Cth6  Tcase   0               220m

.ENDS

**********

.SUBCKT BSB165N15NZ3 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=0.05n Ld=0.7n Lg=0.1n

.PARAM Rs=192u      Rg=1         Rd=50u       Rm=180u
.PARAM Inn=30       Unn=10       Rmax=16.5m   gmmin=27
.PARAM RRf=493m     Rrbond=755n  Rtb=40.7m    g2=997m
.PARAM act=10.26    Rsp=0.81

.FUNC   Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S3_150_nsp_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmmin={gmmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               240.37u
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {3.83m+limit(Zthtype,0,1)*1.42m}
Rth2  t1      t2              {34.48m+limit(Zthtype,0,1)*12.76m}
Rth3  t2      t3              {128.72m+limit(Zthtype,0,1)*50.18m}
Rth4  t3      t4              {174.36m+limit(Zthtype,0,1)*360.4m}
Rth5  t4      Tcase           {271.88m+limit(Zthtype,0,1)*561.97m}
Cth1  Tj      0               214.263u
Cth2  t1      0               255.486u
Cth3  t2      0               2.735m
Cth4  t3      0               1.744m
Cth5  t4      0               71.386m
Cth6  Tcase   0               10m

.ENDS

**********

.SUBCKT IPB200N15N3 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=2n Ld=1n Lg=4n

.PARAM Rs=1.05m     Rg=2.4       Rd=50u       Rm=350u
.PARAM Inn=50       Unn=10       Rmax=20m     gmmin=31
.PARAM RRf=451m     Rrbond=35m   Rtb=9.3      g2=824m
.PARAM act=9.06     Rsp=0.7

.FUNC   Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S3_150_nsp_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmmin={gmmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               6.24m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {4.34m+limit(Zthtype,0,1)*1.61m}
Rth2  t1      t2              {38.92m+limit(Zthtype,0,1)*14.4m}
Rth3  t2      t3              {162.03m+limit(Zthtype,0,1)*75.1m}
Rth4  t3      t4              {206.11m+limit(Zthtype,0,1)*87.15m}
Rth5  t4      Tcase           {288.39m+limit(Zthtype,0,1)*121.95m}
Cth1  Tj      0               189.203u
Cth2  t1      0               226.333u
Cth3  t2      0               2.294m
Cth4  t3      0               1.54m
Cth5  t4      0               66.7m
Cth6  Tcase   0               190m

.ENDS

**********

.SUBCKT IPD200N15N3 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=1.5n Ld=1n Lg=3n

.PARAM Rs=829u      Rg=2.4       Rd=50u       Rm=350u
.PARAM Inn=50       Unn=10       Rmax=20m     gmmin=32
.PARAM RRf=390m     Rrbond=12m   Rtb=5.5      g2=758m
.PARAM act=9.06     Rsp=0.7

.FUNC   Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S3_150_nsp_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmmin={gmmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               3.71m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {4.34m+limit(Zthtype,0,1)*1.61m}
Rth2  t1      t2              {38.92m+limit(Zthtype,0,1)*14.4m}
Rth3  t2      t3              {162.03m+limit(Zthtype,0,1)*75.1m}
Rth4  t3      t4              {168.47m+limit(Zthtype,0,1)*102.69m}
Rth5  t4      Tcase           {268.68m+limit(Zthtype,0,1)*163.76m}
Cth1  Tj      0               189.203u
Cth2  t1      0               226.333u
Cth3  t2      0               2.294m
Cth4  t3      0               1.597m
Cth5  t4      0               36.984m
Cth6  Tcase   0               70m

.ENDS

**********

.SUBCKT IPI200N15N3 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=2n Ld=2.5n Lg=4n

.PARAM Rs=1.05m     Rg=2.4       Rd=350u      Rm=350u
.PARAM Inn=50       Unn=10       Rmax=20m     gmmin=31
.PARAM RRf=451m     Rrbond=35m   Rtb=9.3      g2=824m
.PARAM act=9.06     Rsp=0.7

.FUNC   Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S3_150_nsp_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmmin={gmmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               6.24m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {4.34m+limit(Zthtype,0,1)*1.61m}
Rth2  t1      t2              {38.92m+limit(Zthtype,0,1)*14.4m}
Rth3  t2      t3              {162.03m+limit(Zthtype,0,1)*75.1m}
Rth4  t3      t4              {206.11m+limit(Zthtype,0,1)*87.15m}
Rth5  t4      Tcase           {288.39m+limit(Zthtype,0,1)*121.95m}
Cth1  Tj      0               189.203u
Cth2  t1      0               226.333u
Cth3  t2      0               2.294m
Cth4  t3      0               1.54m
Cth5  t4      0               66.7m
Cth6  Tcase   0               190m

.ENDS

**********

.SUBCKT IPP200N15N3 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=2n Ld=2.5n Lg=4n

.PARAM Rs=1.05m     Rg=2.4       Rd=350u      Rm=350u
.PARAM Inn=50       Unn=10       Rmax=20m     gmmin=31
.PARAM RRf=451m     Rrbond=35m   Rtb=9.3      g2=824m
.PARAM act=9.06     Rsp=0.7

.FUNC   Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S3_150_nsp_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmmin={gmmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               6.24m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {4.34m+limit(Zthtype,0,1)*1.61m}
Rth2  t1      t2              {38.92m+limit(Zthtype,0,1)*14.4m}
Rth3  t2      t3              {162.03m+limit(Zthtype,0,1)*75.1m}
Rth4  t3      t4              {206.11m+limit(Zthtype,0,1)*87.15m}
Rth5  t4      Tcase           {288.39m+limit(Zthtype,0,1)*121.95m}
Cth1  Tj      0               189.203u
Cth2  t1      0               226.333u
Cth3  t2      0               2.294m
Cth4  t3      0               1.54m
Cth5  t4      0               66.7m
Cth6  Tcase   0               220m

.ENDS

**********

.SUBCKT BSC190N15NS3 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=1n Ld=1n Lg=3n

.PARAM Rs=404u      Rg=2.4       Rd=50u       Rm=233u
.PARAM Inn=50       Unn=10       Rmax=19m     gmmin=33

.PARAM act=9.06     Rsp=0.7



X1  d1 g s sp Tj S3_150_nsp_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmmin={gmmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10




Rth1  Tj      t1              {4.34m+limit(Zthtype,0,1)*1.61m}
Rth2  t1      t2              {38.92m+limit(Zthtype,0,1)*14.4m}
Rth3  t2      t3              {146.71m+limit(Zthtype,0,1)*47.77m}
Rth4  t3      t4              {157.76m+limit(Zthtype,0,1)*118.31m}
Rth5  t4      Tcase           {268.68m+limit(Zthtype,0,1)*201.5m}
Cth1  Tj      0               189.203u
Cth2  t1      0               226.333u
Cth3  t2      0               2.294m
Cth4  t3      0               1.597m
Cth5  t4      0               36.984m
Cth6  Tcase   0               30m

.ENDS

**********

.SUBCKT BSB280N15NZ3 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=0.05n Ld=0.7n Lg=0.1n

.PARAM Rs=92u       Rg=1         Rd=50u       Rm=80u
.PARAM Inn=30       Unn=10       Rmax=28m     gmmin=21
.PARAM RRf=493m     Rrbond=755n  Rtb=40.7m    g2=997m
.PARAM act=5.8      Rsp=0.75

.FUNC   Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S3_150_nsp_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmmin={gmmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               240.37u
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {6.78m+limit(Zthtype,0,1)*2.51m}
Rth2  t1      t2              {59.99m+limit(Zthtype,0,1)*22.2m}
Rth3  t2      t3              {215.7m+limit(Zthtype,0,1)*89.14m}
Rth4  t3      t4              {287.62m+limit(Zthtype,0,1)*517.12m}
Rth5  t4      Tcase           {357.03m+limit(Zthtype,0,1)*641.91m}
Cth1  Tj      0               121.123u
Cth2  t1      0               146.833u
Cth3  t2      0               1.66m
Cth4  t3      0               985.913u
Cth5  t4      0               53.55m
Cth6  Tcase   0               10m

.ENDS

**********

.SUBCKT BSC360N15NS3 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=1n Ld=1n Lg=3n

.PARAM Rs=251u      Rg=2.1       Rd=50u       Rm=80u
.PARAM Inn=10       Unn=10       Rmax=36m     gmmin=10.48

.PARAM act=4.446    Rsp=0.49



X1  d1 g s sp Tj S3_150_nsp_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmmin={gmmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10




Rth1  Tj      t1              {8.84m+limit(Zthtype,0,1)*3.28m}
Rth2  t1      t2              {77.53m+limit(Zthtype,0,1)*28.69m}
Rth3  t2      t3              {280.13m+limit(Zthtype,0,1)*98m}
Rth4  t3      t4              {321.49m+limit(Zthtype,0,1)*229.13m}
Rth5  t4      Tcase           {381.22m+limit(Zthtype,0,1)*271.69m}
Cth1  Tj      0               92.847u
Cth2  t1      0               113.619u
Cth3  t2      0               1.222m
Cth4  t3      0               783.47u
Cth5  t4      0               26.157m
Cth6  Tcase   0               30m

.ENDS

**********

.SUBCKT IPB530N15N3 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=2.5n Ld=1n Lg=4n

.PARAM Rs=1.86m     Rg=2.1       Rd=50u       Rm=689u
.PARAM Inn=19       Unn=10       Rmax=53m     gmmin=12
.PARAM RRf=488m     Rrbond=141m  Rtb=18.5     g2=904m
.PARAM act=3.32     Rsp=0.7

.FUNC   Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S3_150_nsp_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmmin={gmmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               3.12m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {11.84m+limit(Zthtype,0,1)*4.39m}
Rth2  t1      t2              {102.6m+limit(Zthtype,0,1)*37.97m}
Rth3  t2      t3              {404.89m+limit(Zthtype,0,1)*206.27m}
Rth4  t3      t4              {456.17m+limit(Zthtype,0,1)*250.45m}
Rth5  t4      Tcase           {468.31m+limit(Zthtype,0,1)*257.11m}
Cth1  Tj      0               69.333u
Cth2  t1      0               85.852u
Cth3  t2      0               951.044u
Cth4  t3      0               564.35u
Cth5  t4      0               42.987m
Cth6  Tcase   0               190m

.ENDS

**********

.SUBCKT IPD530N15N3 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=2n Ld=1n Lg=3n

.PARAM Rs=1.84m     Rg=2.1       Rd=50u       Rm=689u
.PARAM Inn=19       Unn=10       Rmax=53m     gmmin=12
.PARAM RRf=490m     Rrbond=141m  Rtb=18.5     g2=913m
.PARAM act=3.32     Rsp=0.7

.FUNC   Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S3_150_nsp_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmmin={gmmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               3.12m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {11.84m+limit(Zthtype,0,1)*4.39m}
Rth2  t1      t2              {102.6m+limit(Zthtype,0,1)*37.97m}
Rth3  t2      t3              {404.89m+limit(Zthtype,0,1)*206.27m}
Rth4  t3      t4              {470.43m+limit(Zthtype,0,1)*279.63m}
Rth5  t4      Tcase           {427.73m+limit(Zthtype,0,1)*254.25m}
Cth1  Tj      0               69.333u
Cth2  t1      0               85.852u
Cth3  t2      0               951.044u
Cth4  t3      0               585.047u
Cth5  t4      0               25.047m
Cth6  Tcase   0               70m

.ENDS

**********

.SUBCKT IPI530N15N3 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=2.5n Ld=2.5n Lg=4n

.PARAM Rs=1.86m     Rg=2.1       Rd=50u       Rm=689u
.PARAM Inn=19       Unn=10       Rmax=53m     gmmin=12
.PARAM RRf=488m     Rrbond=141m  Rtb=18.5     g2=904m
.PARAM act=3.32     Rsp=0.7

.FUNC   Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S3_150_nsp_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmmin={gmmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               3.12m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {11.84m+limit(Zthtype,0,1)*4.39m}
Rth2  t1      t2              {102.6m+limit(Zthtype,0,1)*37.97m}
Rth3  t2      t3              {404.89m+limit(Zthtype,0,1)*206.27m}
Rth4  t3      t4              {456.17m+limit(Zthtype,0,1)*250.45m}
Rth5  t4      Tcase           {468.31m+limit(Zthtype,0,1)*257.11m}
Cth1  Tj      0               69.333u
Cth2  t1      0               85.852u
Cth3  t2      0               951.044u
Cth4  t3      0               564.35u
Cth5  t4      0               42.987m
Cth6  Tcase   0               190m

.ENDS

**********

.SUBCKT IPP530N15N3 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=2.5n Ld=2.5n Lg=4n

.PARAM Rs=1.86m     Rg=2.1       Rd=350u      Rm=689u
.PARAM Inn=19       Unn=10       Rmax=53m     gmmin=12
.PARAM RRf=488m     Rrbond=141m  Rtb=18.5     g2=904m
.PARAM act=3.32     Rsp=0.7

.FUNC   Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S3_150_nsp_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmmin={gmmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               3.12m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {11.84m+limit(Zthtype,0,1)*4.39m}
Rth2  t1      t2              {102.6m+limit(Zthtype,0,1)*37.97m}
Rth3  t2      t3              {404.89m+limit(Zthtype,0,1)*206.27m}
Rth4  t3      t4              {456.17m+limit(Zthtype,0,1)*250.45m}
Rth5  t4      Tcase           {468.31m+limit(Zthtype,0,1)*257.11m}
Cth1  Tj      0               69.333u
Cth2  t1      0               85.852u
Cth3  t2      0               951.044u
Cth4  t3      0               564.35u
Cth5  t4      0               42.987m
Cth6  Tcase   0               220m

.ENDS

**********

.SUBCKT BSC520N15NS3 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=1n Ld=1n Lg=3n

.PARAM Rs=603u      Rg=2.1       Rd=50u       Rm=411u
.PARAM Inn=18       Unn=10       Rmax=52m     gmmin=11.68

.PARAM act=3.32     Rsp=0.7



X1  d1 g s sp Tj S3_150_nsp_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmmin={gmmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10




Rth1  Tj      t1              {11.84m+limit(Zthtype,0,1)*4.39m}
Rth2  t1      t2              {102.6m+limit(Zthtype,0,1)*37.97m}
Rth3  t2      t3              {363.08m+limit(Zthtype,0,1)*131.68m}
Rth4  t3      t4              {430.53m+limit(Zthtype,0,1)*346.22m}
Rth5  t4      Tcase           {427.73m+limit(Zthtype,0,1)*343.96m}
Cth1  Tj      0               69.333u
Cth2  t1      0               85.852u
Cth3  t2      0               951.044u
Cth4  t3      0               585.047u
Cth5  t4      0               25.047m
Cth6  Tcase   0               30m

.ENDS

**********

.SUBCKT BSZ520N15NS3 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=1n Ld=1n Lg=3n

.PARAM Rs=514u      Rg=2.1       Rd=50u       Rm=281u
.PARAM Inn=18       Unn=10       Rmax=52m     gmmin=12
.PARAM RRf=494m     Rrbond=6m    Rtb=3.6      g2=927m
.PARAM act=3.32     Rsp=0.7

.FUNC   Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S3_150_nsp_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmmin={gmmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               2.47m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {11.84m+limit(Zthtype,0,1)*4.39m}
Rth2  t1      t2              {102.6m+limit(Zthtype,0,1)*37.97m}
Rth3  t2      t3              {363.08m+limit(Zthtype,0,1)*131.68m}
Rth4  t3      t4              {430.53m+limit(Zthtype,0,1)*346.22m}
Rth5  t4      Tcase           {427.73m+limit(Zthtype,0,1)*343.96m}
Cth1  Tj      0               69.333u
Cth2  t1      0               85.852u
Cth3  t2      0               951.044u
Cth4  t3      0               585.047u
Cth5  t4      0               25.047m
Cth6  Tcase   0               10m

.ENDS

**********

.SUBCKT BSZ900N15NS3 drain gate source Tj Tcase PARAMS: dVth=0 dRdson=0 dgfs=0 dC=0 Zthtype=0 Ls=1n Ld=1n Lg=3n

.PARAM Rs=954u      Rg=1.7       Rd=50u       Rm=721u
.PARAM Inn=10.3     Unn=10       Rmax=90m     gmmin=7
.PARAM RRf=494m     Rrbond=6m    Rtb=3.6      g2=927m
.PARAM act=1.87     Rsp=0.51

.FUNC   Pb(I,dT,Rb)  {Rb/(2*Rtb)*(I-limit(dT/(max(I,1n)*Rb)+RRf*I*g2,0,I))**2}

X1  d1 g s sp Tj S3_150_nsp_var PARAMS: a={act} Rsp={Rsp} dVth={dVth} dR={dRdson} dgfs={dgfs} Inn={Inn} Unn={Unn}
                                        +Rmax={Rmax} gmmin={gmmin} Rs={Rs} Rp={Rd} dC={dC} Rm={Rm}
Rg    g1     g    {Rg}
Lg    gate   g1   {Lg*if(dgfs==99,0,1)}
Gs    s1     s    VALUE={V(s1,s)/(Rs*(1+(limit(V(Tj),-200,999)-25)*4m)-Rm)}
Rsa   s1     s    1Meg
Ls    source s1   {Ls*if(dgfs==99,0,1)}
Rda   d1     d2   {Rd}
Ld    drain  d2   {Ld*if(dgfs==99,0,1)}
Rsb   source s1    10
Rga   gate   g1    10
Rdb   drain  d2    10

G_TH  0    Tb  VALUE =  {Pb(abs(I(Ls)),V(Tj,Tcase),Rrbond*(1+(limit((V(Tb)+V(Tj))/2,-200,999)-25)*4m))}
Cthb  Tb      0               2.47m
Rthb  Tb      Tj              {Rtb}
Rth1  Tj      t1              {21.03m+limit(Zthtype,0,1)*7.78m}
Rth2  t1      t2              {177.02m+limit(Zthtype,0,1)*65.51m}
Rth3  t2      t3              {606.71m+limit(Zthtype,0,1)*235.7m}
Rth4  t3      t4              {772.25m+limit(Zthtype,0,1)*549.57m}
Rth5  t4      Tcase           {505.03m+limit(Zthtype,0,1)*359.4m}
Cth1  Tj      0               39.052u
Cth2  t1      0               49.761u
Cth3  t2      0               579.653u
Cth4  t3      0               329.53u
Cth5  t4      0               31.318m
Cth6  Tcase   0               10m

.ENDS